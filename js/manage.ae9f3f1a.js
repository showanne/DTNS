(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["manage"],{1276:function(e,t,a){"use strict";var r=a("d784"),s=a("44e7"),n=a("825a"),i=a("1d80"),l=a("4840"),d=a("8aa5"),o=a("50c4"),c=a("14c3"),m=a("9263"),u=a("9f7f"),p=a("d039"),h=u.UNSUPPORTED_Y,v=[].push,f=Math.min,g=4294967295,b=!p((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));r("split",(function(e,t,a){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var r=String(i(this)),n=void 0===a?g:a>>>0;if(0===n)return[];if(void 0===e)return[r];if(!s(e))return t.call(r,e,n);var l,d,o,c=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,h=new RegExp(e.source,u+"g");while(l=m.call(h,r)){if(d=h.lastIndex,d>p&&(c.push(r.slice(p,l.index)),l.length>1&&l.index<r.length&&v.apply(c,l.slice(1)),o=l[0].length,p=d,c.length>=n))break;h.lastIndex===l.index&&h.lastIndex++}return p===r.length?!o&&h.test("")||c.push(""):c.push(r.slice(p)),c.length>n?c.slice(0,n):c}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:t.call(this,e,a)}:t,[function(t,a){var s=i(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,s,a):r.call(String(s),t,a)},function(e,s){var i=a(r,this,e,s,r!==t);if(i.done)return i.value;var m=n(this),u=String(e),p=l(m,RegExp),v=m.unicode,b=(m.ignoreCase?"i":"")+(m.multiline?"m":"")+(m.unicode?"u":"")+(h?"g":"y"),w=new p(h?"^(?:"+m.source+")":m,b),y=void 0===s?g:s>>>0;if(0===y)return[];if(0===u.length)return null===c(w,u)?[u]:[];var x=0,_=0,k=[];while(_<u.length){w.lastIndex=h?0:_;var C,S=c(w,h?u.slice(_):u);if(null===S||(C=f(o(w.lastIndex+(h?_:0)),u.length))===x)_=d(u,_,v);else{if(k.push(u.slice(x,_)),k.length===y)return k;for(var I=1;I<=S.length-1;I++)if(k.push(S[I]),k.length===y)return k;_=x=C}}return k.push(u.slice(x)),k}]}),!b,h)},3241:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"manageTemplate"}},[a("md-table",{attrs:{"md-height":"unset","md-fixed-header":""},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var r=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"編號","md-sort-by":"index","md-numeric":""}},[e._v(e._s(r.index))]),a("md-table-cell",{attrs:{"md-label":"模板名稱","md-sort-by":"name"}},[e._v(e._s(r.name))]),a("md-table-cell",{attrs:{"md-label":"是否開放","md-sort-by":"show"}},[a("md-switch",{staticClass:"md-primary",model:{value:r.show,callback:function(t){e.$set(r,"show",t)},expression:"item.show"}})],1),a("md-table-cell",{attrs:{"md-label":"各模板欄位","md-sort-by":"input"}},e._l(r.input,(function(t,r){return a("md-chip",{key:r,staticClass:"md-accent",attrs:{"md-deletable":""}},[e._v(" "+e._s(t.field)+" ")])})),1)],1)}}]),model:{value:e.tempList,callback:function(t){e.tempList=t},expression:"tempList"}})],1)},s=[],n={name:"ManageTemplate"},i=n,l=a("2877"),d=Object(l["a"])(i,r,s,!1,null,null,null);t["default"]=d.exports},6366:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"manageSpecial"}},[e._v(" ManageSpecialManageSpecial ")])},s=[],n={name:"ManageSpecial"},i=n,l=a("2877"),d=Object(l["a"])(i,r,s,!1,null,null,null);t["default"]=d.exports},"9d60":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"manageArticle"}},[a("ve-table",{staticStyle:{"'word-break'":"break-all"},attrs:{columns:e.tableTitle,"table-data":e.article.filter((function(t){return!e.searchText||t.name.includes(e.searchText)})),"fixed-header":!0,"border-around":!1,"border-x":!0,"border-y":!1,"cell-style-option":e.cellStyleOption}}),e.loading?a("md-empty-state",{attrs:{"md-icon":"submit","md-label":"Loading..."}},[a("md-progress-spinner",{staticClass:"md-primary loading",attrs:{"md-diameter":100,"md-stroke":10,"md-mode":"indeterminate"}})],1):e._e(),a("md-dialog",{attrs:{"md-active":e.showModal},on:{"update:mdActive":function(t){e.showModal=t},"update:md-active":function(t){e.showModal=t}}},[a("md-dialog-title",{staticClass:"text-right"},[e._v("查看文章")]),a("md-dialog-content",[a("md-card",[a("md-button",{staticClass:"closeBtn w-unset h-unset md-primary",on:{click:function(t){e.showModal=!1}}},[a("md-icon",[e._v("close")])],1),a("md-card-content",[a("md-avatar",{staticClass:"md-small md-elevation-3 mr-2"},[a("img",{attrs:{src:e.articleShow.avatar,alt:e.articleShow.author}})]),a("div",{staticClass:"md-subhead"},[e._v(e._s(e.articleShow.author))]),a("div",{staticClass:"md-icon-dateL"},[e._v(e._s(e.articleShow.date))]),a("div",{staticClass:"md-title text-v-html"},[e._v(e._s(e.articleShow.title))]),a("div",{staticClass:"md-caption"},[e._v("選擇日期："+e._s(e.articleShow.datepicker))]),e.articleShow.image?a("md-card-media",[a("img",{staticClass:"w-33 text-right",attrs:{src:e.articleShow.image,alt:e.articleShow.title}})]):e._e(),a("div",{staticClass:"md-body-1 text-v-html",domProps:{innerHTML:e._s("描述1："+e.articleShow.textarea)}}),a("div",{staticClass:"md-body-1 text-v-html",domProps:{innerHTML:e._s("描述2："+e.articleShow.text)}}),a("div",{staticClass:"md-subhead"},[e._v("被檢舉："+e._s(e.articleShow.report))]),a("div",{staticClass:"md-subhead"},[e._v("移除文章："+e._s(e.articleShow.publicOff))]),a("div",{staticClass:"md-subhead"},[e._v("按讚人次："+e._s(e.articleShow.likeNum))]),a("div",{staticClass:"md-subhead"},[e._v("儲存人次："+e._s(e.articleShow.saveNum))]),a("div",{staticClass:"md-subhead"},[e._v("分享人次："+e._s(e.articleShow.shareNum))])],1)],1)],1)],1),a("md-dialog",{attrs:{"md-active":e.msgModal},on:{"update:mdActive":function(t){e.msgModal=t},"update:md-active":function(t){e.msgModal=t}}},[a("md-dialog-title",[e._v(e._s(e.Msg))]),a("md-dialog-actions",[a("md-button",{staticClass:"md-primary",on:{click:function(t){e.msgModal=!1}}},[e._v("Close")]),a("md-button",{staticClass:"md-primary",on:{click:function(t){e.msgModal=!1}}},[e._v("SEE")])],1)],1)],1)},s=[],n=a("1da1"),i=(a("96cf"),a("99af"),a("ac1f"),a("1276"),a("d81d"),{name:"ManageArticle",data:function(){var e=this;this.$createElement;return{cellStyleOption:{bodyCellClass:function(e){e.row,e.column,e.rowIndex;return"table-body-cell-class"}},searchText:"",tableTitle:[{field:"",key:"a",title:"項次",width:"5%",align:"center",renderBodyCell:function(e,t){e.row,e.column;var a=e.rowIndex;return t("span",{style:"color:#7876B3;"},[++a])}},{field:"template",key:"b",title:"主題",width:"5%",align:"center",fixed:"left"},{field:"title",key:"c",title:"標題",width:"25%",renderBodyCell:function(e,t){var a=e.row,r=e.column;e.rowIndex;return t("div",{class:"text-v-html",domProps:{innerHTML:a[r.field]}})}},{field:"share",key:"d",title:"公開",width:"7.5%",renderBodyCell:function(t,a){var r=t.row,s=t.column;t.rowIndex;return a("md-switch",{class:"md-primary",model:{value:r[s.field],callback:function(t){e.$set(r,s.field,t)}}})}},{field:"publicOff",key:"e",title:"下架",width:"7.5%",renderBodyCell:function(t,a){var r=t.row,s=t.column;t.rowIndex;return a("md-switch",{class:"md-primary",model:{value:r[s.field],callback:function(t){e.$set(r,s.field,t)}}})}},{field:"image",key:"f",title:"圖片",width:"25%",renderBodyCell:function(e,t){var a=e.row,r=e.column;e.rowIndex;return t("img",{attrs:{src:a[r.field]}})}},{field:"date",key:"k",title:"日期",width:"10%"},{field:"",key:"l",title:"動作",width:"15%",align:"center",fixed:"right",renderBodyCell:function(t,a){t.row,t.column;var r=t.rowIndex;return a("div",{class:"md-layout md-alignment-center-center"},[a("md-button",{class:"md-md-layout-item md-primary h-unset w-unset",on:{click:function(){return e.showRow(r)}}},[a("md-icon",["visibility"])]),a("md-button",{class:"md-md-layout-item md-primary h-unset w-unset",on:{click:function(){return e.publicOff(r)}}},[a("md-icon",["public_off"])])])}}],article:[],search:null,searched:[],articleShow:{template:"",title:"",author:"",avatar:"",share:"",image:"",textarea:"",text:"",datepicker:"",select:"",date:"",report:"",publicOff:"",likeNum:"",saveNum:"",shareNum:""},showModal:!1,msgModal:!1,Msg:"",loading:!1}},methods:{showRow:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.showModal=!0,a.prev=1,a.next=4,t.axios.get("/article/"+t.article[e]._id);case 4:r=a.sent,s=r.data,t.articleShow.template=s.result.template,t.articleShow.title=s.result.title,t.articleShow.author=s.result.author,t.articleShow.avatar=s.result.avatar,t.articleShow.share=s.result.share,s.result.image&&(t.articleShow.image="".concat("https://dtns-web.herokuapp.com","/file/").concat(s.result.image)),t.articleShow.textarea=s.result.textarea,t.articleShow.text=s.result.text,t.articleShow.datepicker=new Date(s.result.datepicker).toISOString().split("T")[0],t.articleShow.date=new Date(s.result.date).toISOString().split("T")[0],t.articleShow.select=s.result.select,t.articleShow.report=s.result.report,t.articleShow.publicOff=s.result.publicOff,t.articleShow.likeNum=s.result.likeNum,t.articleShow.saveNum=s.result.saveNum,t.articleShow.shareNum=s.result.shareNum,a.next=27;break;case 24:a.prev=24,a.t0=a["catch"](1),console.log(a.t0);case 27:case"end":return a.stop()}}),a,null,[[1,24]])})))()},publicOff:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.axios.patch("/article/all",{article:t.article[e]._id,share:!1,publicOff:!0},{headers:{authorization:"Bearer "+t.$store.state.jwt.token}});case 3:t.article[e].share=!1,t.article[e].publicOff=!0,a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},searchInputChange:function(e){this.searchText=e.target.value}},created:function(){this.searched=this.article},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.axios.get("/article/all",{headers:{authorization:"Bearer "+e.$store.state.jwt.token}});case 4:a=t.sent,r=a.data,e.article=r.result.map((function(e){return e.image&&(e.image="".concat("https://dtns-web.herokuapp.com","/file/").concat(e.image)),(e.datepicker||e.date)&&(e.datepicker=new Date(e.datepicker).toISOString().split("T")[0],e.date=new Date(e.date).toISOString().split("T")[0]),e})),e.loading=!1,t.next=17;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log(t.t0),s="",s=null===t.t0.response.data.message?t.t0:t.t0.response.data.message,e.Msg=s,e.msgModal=!0;case 17:case"end":return t.stop()}}),t,null,[[1,10]])})))()}}),l=i,d=a("2877"),o=Object(d["a"])(l,r,s,!1,null,null,null);t["default"]=o.exports},a480:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"manageReply"}},[a("ve-table",{staticStyle:{width:"100%"},attrs:{columns:e.replyTable,"table-data":e.replyForm,"expand-option":e.expandOption,"row-key-field-name":"_id"}}),e.loading?a("md-empty-state",{attrs:{"md-icon":"submit","md-label":"Loading..."}},[a("md-progress-spinner",{staticClass:"md-primary loading",attrs:{"md-diameter":100,"md-stroke":10,"md-mode":"indeterminate"}})],1):e._e(),a("md-dialog-alert",{attrs:{"md-active":e.editReply,"md-title":"回覆問題","md-content":e.replyAlert},on:{"update:mdActive":function(t){e.editReply=t},"update:md-active":function(t){e.editReply=t}}})],1)},s=[],n=a("1da1"),i=(a("d81d"),a("ac1f"),a("1276"),a("96cf"),{name:"ManageReply",data:function(){var e=this;this.$createElement;return{loading:!1,editReply:!1,replyAlert:"",replyForm:[],expandOption:{trigger:"cell",render:function(t,a){var r=t.row,s=(t.column,t.rowIndex);return a("md-field",{class:"w-66",attrs:{"md-clearable":!0}},[a("md-button",{class:"md-primary",on:{click:function(){return e.submitReply(s)}}},[a("md-icon",["reply"])]),a("md-textarea",{attrs:{"md-autogrow":!0},model:{value:r.replyIssue,callback:function(t){e.$set(r,"replyIssue",t)}}})])}},replyTable:[{field:"",key:"a",type:"expand",title:"",width:"5%",align:"center"},{field:"",key:"b",title:"項次",width:"5%",align:"center",renderBodyCell:function(e,t){e.row,e.column;var a=e.rowIndex;return t("span",{style:"color:#7876B3;"},[++a])}},{field:"nickname",key:"c",title:"暱稱",width:"10%",align:"left"},{field:"member",key:"d",title:"會員",width:"5%",align:"center",renderBodyCell:function(e,t){var a=e.row,r=e.column;e.rowIndex;return t("md-icon",[a[r.field]])}},{field:"majorIssue",key:"e",title:"主要問題",width:"10%",align:"left"},{field:"issueDescription",key:"f",title:"問題描述",width:99,align:"left"},{field:"replyIssue",key:"g",title:"問題回復",width:99,align:"left"},{field:"reply",key:"h",title:"回復",width:"5%",align:"center",renderBodyCell:function(e,t){var a=e.row,r=e.column;e.rowIndex;return t("md-icon",[a[r.field]])}}]}},methods:{submitReply:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.axios.patch("/issue",{_id:t.replyForm[e]._id,replyIssue:t.replyForm[e].replyIssue,reply:!0},{headers:{authorization:"Bearer "+t.$store.state.jwt.token}});case 3:t.replyForm[e].reply=!0,window.setTimeout((function(){t.editReply=!0,t.replyAlert="已回復編號 "+t.replyForm[e]._id+"的問題"}),1500),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()}},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.axios.get("/issue/all",{headers:{authorization:"Bearer "+e.$store.state.jwt.token}});case 4:a=t.sent,r=a.data,e.replyForm=r.result.map((function(e){return e.date&&(e.date=new Date(e.date).toISOString().split("T")[0]),e.member?e.member="account_circle":e.member="hide_source",e.reply?e.reply="done_all":e.reply="feedback",e})),e.loading=!1,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()}}),l=i,d=a("2877"),o=Object(d["a"])(l,r,s,!1,null,null,null);t["default"]=o.exports},d81d:function(e,t,a){"use strict";var r=a("23e7"),s=a("b727").map,n=a("1dde"),i=n("map");r({target:"Array",proto:!0,forced:!i},{map:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},e513:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"manageEditApp"}},[a("md-card",[a("md-card-header",{staticClass:"md-secondary"},[a("h4",{staticClass:"md-title fw-bold"},[e._v("Edit Profile")]),a("p",{staticClass:"md-body-1 m-1"},[e._v("Complete your profile")])]),a("md-card-content",[a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-small-size-100 md-size-33"},[a("md-field",[a("label",[e._v("User Name")]),a("md-input",{attrs:{type:"text"},model:{value:e.edit.username,callback:function(t){e.$set(e.edit,"username",t)},expression:"edit.username"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-33"},[a("md-field",[a("label",[e._v("Email Address")]),a("md-input",{attrs:{type:"email"},model:{value:e.edit.emailadress,callback:function(t){e.$set(e.edit,"emailadress",t)},expression:"edit.emailadress"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-50"},[a("md-field",[a("label",[e._v("First Name")]),a("md-input",{attrs:{type:"text"},model:{value:e.edit.firstname,callback:function(t){e.$set(e.edit,"firstname",t)},expression:"edit.firstname"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-50"},[a("md-field",[a("label",[e._v("Last Name")]),a("md-input",{attrs:{type:"text"},model:{value:e.edit.lastname,callback:function(t){e.$set(e.edit,"lastname",t)},expression:"edit.lastname"}})],1)],1),a("div",{staticClass:"md-layout-item md-size-100"},[a("md-field",{attrs:{maxlength:"5"}},[a("label",[e._v("About Me")]),a("md-textarea",{model:{value:e.edit.aboutme,callback:function(t){e.$set(e.edit,"aboutme",t)},expression:"edit.aboutme"}})],1)],1),a("div",{staticClass:"md-layout-item md-size-100 text-right"},[a("md-button",{staticClass:"md-raised md-success"},[e._v("Update Profile")])],1)])])],1)],1)},s=[],n={name:"ManageEditApp",data:function(){return{edit:{username:null,disabled:null,emailadress:null,lastname:null,firstname:null,address:null,city:null,country:null,code:null,aboutme:"Lamborghini Mercy, Your chick she so thirsty, I'm in that two seat Lambo."}}}},i=n,l=a("2877"),d=Object(l["a"])(i,r,s,!1,null,null,null);t["default"]=d.exports},ed7c:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"manageMemberData"}},[a("md-table",{attrs:{"md-sort":"name","md-sort-order":"asc","md-height":"unset","md-fixed-header":""},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var r=t.item;return a("md-table-row",{},[a("md-table-cell",{staticClass:"avatar",attrs:{"md-label":"大頭照"}},[r.avatar?a("md-avatar",{},[a("img",{attrs:{src:r.avatar,alt:r.name,width:"90"}})]):e._e()],1),a("md-table-cell",{attrs:{"md-label":"姓名","md-sort-by":"name"}},[e._v(e._s(r.name||r.account))]),a("md-table-cell",{attrs:{"md-label":"身份","md-sort-by":"role"}},[0==r.role?a("span",[e._v("會員（"+e._s(r.role)+"）")]):1==r.role?a("span",[e._v("管理員（"+e._s(r.role)+"）")]):-1==r.role?a("span",[e._v("訪客（"+e._s(r.role)+"）")]):e._e()]),a("md-table-cell",{attrs:{"md-label":"登入"}},[e._v(e._s(r.tokens))]),a("md-table-cell",{attrs:{"md-label":"文章數"}},[e._v(e._s(r.editor))])],1)}}]),model:{value:e.memberData,callback:function(t){e.memberData=t},expression:"memberData"}},[a("md-table-toolbar",[a("div",{staticClass:"md-toolbar-section-start"},[a("h1",{staticClass:"md-title"},[e._v("使用者清單")])]),a("div",{staticClass:"md-toolbar-section-end"},[a("md-button",{staticClass:"md-primary md-raised",on:{click:function(t){e.addUserBtn=!0}}},[e._v(" 新增使用者 ")])],1)]),e.loading?a("md-table-empty-state",{attrs:{"md-icon":"submit","md-label":"Loading..."}},[a("md-progress-spinner",{staticClass:"md-primary loading",attrs:{"md-diameter":100,"md-stroke":10,"md-mode":"indeterminate"}})],1):e._e()],1),a("md-dialog",{attrs:{"md-active":e.addUserBtn},on:{"update:mdActive":function(t){e.addUserBtn=t},"update:md-active":function(t){e.addUserBtn=t}}},[a("md-dialog-title",[a("div",{staticClass:"md-layout md-alignment-center-space-between"},[a("md-icon",{staticClass:"md-size-3x signIcon"},[e._v("person_pin")])],1)]),a("md-dialog-content",{staticClass:"md-scrollbar"},[a("form",{staticClass:"md-layout md-small-hide",attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.validateUser.apply(null,arguments)},reset:e.clearForm}},[a("md-card",{staticClass:"md-layout-item"},[a("md-card-content",[a("md-field",{class:e.getValidationClass("account")},[a("label",{attrs:{for:"account"}},[e._v("Account")]),a("md-input",{attrs:{name:"account",autocomplete:"account",placeholder:"Your Account...",disabled:e.sending},model:{value:e.signUp.account,callback:function(t){e.$set(e.signUp,"account",t)},expression:"signUp.account"}}),e.$v.signUp.account.required?e.$v.signUp.account.minlength?e._e():a("span",{staticClass:"md-error"},[e._v("帳號最少須 5 個字，最多 20 個字")]):a("span",{staticClass:"md-error"},[e._v("帳號是必填欄位")])],1),a("md-field",{class:e.getValidationClass("password")},[a("label",{attrs:{for:"password"}},[e._v("Password")]),a("md-input",{attrs:{type:"password",name:"password",autocomplete:"password",placeholder:"password...",disabled:e.sending},model:{value:e.signUp.password,callback:function(t){e.$set(e.signUp,"password",t)},expression:"signUp.password"}}),e.$v.signUp.password.required?e.$v.signUp.password.minlength?e._e():a("span",{staticClass:"md-error"},[e._v("密碼最少須 4 個字，最多 20 個字")]):a("span",{staticClass:"md-error"},[e._v("密碼是必填欄位")])],1)],1),e.sending?a("md-progress-bar",{attrs:{"md-mode":"indeterminate"}}):e._e(),a("md-card-actions",[a("md-button",{staticClass:"md-primary",on:{click:function(t){e.addUserBtn=!1}}},[e._v(" 關閉 ")]),a("md-button",{staticClass:"md-primary",attrs:{type:"reset"}},[e._v("重設")]),a("md-button",{staticClass:"md-primary",attrs:{type:"submit",disabled:e.sending}},[e._v("創建 ")])],1)],1),a("md-snackbar",{attrs:{"md-active":e.messageSussess},on:{"update:mdActive":function(t){e.messageSussess=t},"update:md-active":function(t){e.messageSussess=t}}},[e._v(" 新帳號 "+e._s(e.signUp.account)+" 創建成功！ ")])],1)])],1),a("md-dialog-alert",{attrs:{"md-active":e.messageShow,"md-title":"ERROR","md-content":e.message},on:{"update:mdActive":function(t){e.messageShow=t},"update:md-active":function(t){e.messageShow=t}}})],1)},s=[],n=a("1da1"),i=(a("96cf"),a("b0c0"),a("d81d"),a("1dce")),l=a("b5ae"),d={name:"ManageMemberData",mixins:[i["validationMixin"]],data:function(){return{loading:!1,selected:{},memberData:[],addUserBtn:!1,signUp:{account:"",name:"",password:"",avatar:""},sending:!1,messageSussess:!1,messageShow:!1,message:""}},validations:{signUp:{account:{required:l["required"],minLength:Object(l["minLength"])(5),maxLength:Object(l["maxLength"])(20)},password:{required:l["required"],minLength:Object(l["minLength"])(4),maxLength:Object(l["maxLength"])(20)}}},methods:{getValidationClass:function(e){var t=this.$v.signUp[e];if(t)return{"md-invalid":t.$invalid&&t.$dirty}},validateUser:function(){this.$v.$touch(),this.$v.$invalid||this.addUser()},addUser:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.signUp.avatar=e.avatarImg,e.signUp.name=e.signUp.account,t.next=5,e.axios.post("/users",e.signUp);case 5:e.memberData.push({account:e.signUp.account,avatar:e.avatarImg,role:0}),e.sending=!0,window.setTimeout((function(){e.messageSussess=!0,e.sending=!1,e.clearForm()}),1500),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),window.setTimeout((function(){e.messageShow=!0,e.message=t.t0,e.sending=!0,e.clearForm()}),1500);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},clearForm:function(){this.$v.$reset(),this.sending=!1,this.signUp.account="",this.signUp.password=""}},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.axios.get("/users/all",{headers:{authorization:"Bearer "+e.$store.state.jwt.token}});case 4:a=t.sent,r=a.data,e.memberData=r.result.map((function(e){return e.tokens&&(e.tokens=e.tokens.length),e.editor&&(e.editor=e.editor.length),e})),e.loading=!1,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()}},o=d,c=a("2877"),m=Object(c["a"])(o,r,s,!1,null,null,null);t["default"]=m.exports},f74b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"manage"}},[a("md-tabs",{staticClass:"md-accent md-small-none-manage",attrs:{"md-alignment":"fixed","md-sync-route":""},on:{"md-changed":e.checkNewPosts},scopedSlots:e._u([{key:"md-tab",fn:function(t){var r=t.tab;return[e._v(" "+e._s(r.label)+" "),r.data.badge?a("i",{staticClass:"badge bg-dark3"},[e._v("!")]):e._e()]}}])},[a("md-tab",{attrs:{id:"tab-memberData","md-label":"會員資料管理",to:"/manage/memberData","md-template-data":{badge:e.newPosts}},on:{click:e.clearNewPosts}},[a("router-view")],1),a("md-tab",{attrs:{id:"tab-article","md-label":"文章管理",to:"/manage/article","md-template-data":{badge:e.newPosts}},on:{click:e.clearNewPosts}},[a("router-view")],1),a("md-tab",{attrs:{id:"tab-template","md-label":"文章模板管理",to:"/manage/template"}},[a("router-view")],1),a("md-tab",{attrs:{id:"tab-reply","md-label":"問題回復",to:"/manage/reply","md-template-data":{badge:e.newPosts}},on:{click:e.clearNewPosts}},[a("router-view")],1)],1),a("md-empty-state",{staticClass:"md-small-show-manage tc-warn2",attrs:{"md-icon":"no_accounts","md-label":"為了您的管理體驗","md-description":"螢幕尺寸小於 800px 管理頁面將不會顯示任何資料！"}})],1)},s=[],n={name:"Manage",data:function(){return{articleTotal:0,newPosts:0,checkInterval:null}},methods:{clearCheckPosts:function(){window.clearInterval(this.checkInterval),this.checkInterval=null},clearNewPosts:function(){this.clearCheckPosts(),this.newPosts=0},checkNewPosts:function(e){var t=this;"tab-posts"===e||this.checkInterval||(this.checkInterval=window.setInterval((function(){99===t.newPosts?(t.newPosts="99+",t.clearCheckPosts()):t.newPosts++}),1e3))}},mounted:function(){this.checkNewPosts()}},i=n,l=a("2877"),d=Object(l["a"])(i,r,s,!1,null,null,null);t["default"]=d.exports},f761:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"manageHome"}},[a("md-avatar",{staticClass:"md-large md-elevation-5"},[a("img",{attrs:{src:e.avatarImg,alt:""}})]),a("h2",[e._v(e._s(e.userName))])],1)},s=[],n={name:"ManageHome",components:{},computed:{user:function(){return this.$store.state.user}}},i=n,l=a("2877"),d=Object(l["a"])(i,r,s,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=manage.ae9f3f1a.js.map