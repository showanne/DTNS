(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["manage"],{3241:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"manageTemplate"}},[a("md-table",{attrs:{"md-fixed-header":""},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var s=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"index","md-sort-by":"index","md-numeric":""}},[e._v(e._s(s.index))]),a("md-table-cell",{attrs:{"md-label":"Name","md-sort-by":"name"}},[e._v(e._s(s.name))]),a("md-table-cell",{attrs:{"md-label":"Subhead","md-sort-by":"subhead"}},[e._v(e._s(s.subhead))]),a("md-table-cell",{attrs:{"md-label":"Show","md-sort-by":"show"}},[a("md-switch",{staticClass:"md-primary",model:{value:s.show,callback:function(t){e.$set(s,"show",t)},expression:"item.show"}})],1),a("md-table-cell",{attrs:{"md-label":"Input","md-sort-by":"input"}},[e._v(e._s(s.input))])],1)}}]),model:{value:e.tempList,callback:function(t){e.tempList=t},expression:"tempList"}})],1)},n=[],i={name:"ManageTemplate"},r=i,l=a("2877"),d=Object(l["a"])(r,s,n,!1,null,null,null);t["default"]=d.exports},6366:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"manageSpecial"}},[e._v(" ManageSpecialManageSpecial ")])},n=[],i={name:"ManageSpecial"},r=i,l=a("2877"),d=Object(l["a"])(r,s,n,!1,null,null,null);t["default"]=d.exports},"9d60":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"manageArticle"}},[a("ve-table",{staticStyle:{"'word-break'":"break-all"},attrs:{columns:e.tableTitle,"table-data":e.article.filter((function(t){return!e.searchText||t.name.includes(e.searchText)})),"max-height":"calc(100vh - 190px)","fixed-header":!0,"border-around":!1,"border-x":!0,"border-y":!1,"cell-style-option":e.cellStyleOption}}),e.loading?a("md-progress-spinner",{staticClass:"md-accent loading",attrs:{"md-diameter":100,"md-stroke":10,"md-mode":"indeterminate"}}):e._e(),a("md-table-empty-state",{attrs:{"md-label":"No article found","md-description":"No article found for this '"+e.search+"' query. Try a different search term ."}}),a("md-dialog",{attrs:{"md-active":e.editModal},on:{"update:mdActive":function(t){e.editModal=t},"update:md-active":function(t){e.editModal=t}}},[a("md-dialog-title",[e._v("查看文章")]),a("md-dialog-content"),a("md-dialog-actions",[a("md-button",{staticClass:"md-primary",on:{click:function(t){e.editModal=!1}}},[e._v("關閉")])],1)],1),a("md-dialog",{attrs:{"md-active":e.msgModal},on:{"update:mdActive":function(t){e.msgModal=t},"update:md-active":function(t){e.msgModal=t}}},[a("md-dialog-title",[e._v(e._s(e.Msg))]),a("md-dialog-actions",[a("md-button",{staticClass:"md-primary",on:{click:function(t){e.msgModal=!1}}},[e._v("Close")]),a("md-button",{staticClass:"md-primary",on:{click:function(t){e.msgModal=!1}}},[e._v("SEE")])],1)],1)],1)},n=[],i=a("1da1"),r=(a("d81d"),a("99af"),a("96cf"),{name:"ManageArticle",data:function(){var e=this;this.$createElement;return{cellStyleOption:{bodyCellClass:function(e){e.row,e.column,e.rowIndex;return"table-body-cell-class"}},searchText:"",tableTitle:[{field:"",key:"a",title:"No.",width:"3%",align:"center",renderBodyCell:function(e,t){e.row,e.column;var a=e.rowIndex;return t("span",{style:"color:#7876B3;"},[++a])}},{field:"template",key:"b",title:"temp",width:"5%",align:"center",fixed:"left"},{field:"title",key:"c",title:"title",width:"30%"},{field:"share",key:"d",title:"share",width:"5%",renderBodyCell:function(t,a){var s=t.row,n=t.column;t.rowIndex;return a("md-switch",{class:"md-primary",model:{value:s[n.field],callback:function(t){e.$set(s,n.field,t)}}})}},{field:"publicOff",key:"e",title:"publicOff",width:"5%",renderBodyCell:function(t,a){var s=t.row,n=t.column;t.rowIndex;return a("md-switch",{class:"md-primary",model:{value:s[n.field],callback:function(t){e.$set(s,n.field,t)}}})}},{field:"image",key:"f",title:"image",width:"15%",renderBodyCell:function(e,t){var a=e.row,s=e.column;e.rowIndex;return t("img",{attrs:{src:a[s.field]}})}},{field:"textarea",key:"g",title:"textarea",width:"20%",ellipsis:{showTitle:!0,lineClamp:2}},{field:"text",key:"h",title:"text",width:"10%"},{field:"select",key:"i",title:"select",width:"5%"},{field:"datepicker",key:"j",title:"datepicker",width:"5%"},{field:"date",key:"k",title:"date",width:"5%"},{field:"",key:"l",title:"Action",width:"20%",align:"center",fixed:"right",renderBodyCell:function(t,a){t.row,t.column;var s=t.rowIndex;return a("div",{class:"md-layout md-alignment-center-center"},[a("md-button",{class:"md-md-layout-item md-primary h-unset w-unset",on:{click:function(){return e.editRow(s)}}},[a("md-icon",["visibility"])]),a("md-button",{class:"md-md-layout-item md-primary h-unset w-unset",on:{click:function(){return e.publicOff(s)}}},[a("md-icon",["public_off"])])])}}],article:[],search:null,searched:[],editModal:!1,msgModal:!1,Msg:"",loading:!1}},methods:{editRow:function(e){this.editModal=!0},publicOff:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,console.log(t.$store.state.jwt.token),a.next=4,t.axios.patch("/article/all",{article:t.article[e]._id,share:!1,publicOff:!0},{headers:{authorization:"Bearer "+t.$store.state.jwt.token}});case 4:alert(t.article[e]._id),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},searchInputChange:function(e){this.searchText=e.target.value}},created:function(){this.searched=this.article},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.axios.get("/article/all",{headers:{authorization:"Bearer "+e.$store.state.jwt.token}});case 4:a=t.sent,s=a.data,e.article=s.result.map((function(e){return e.image&&(e.image="".concat("https://dtns-web.herokuapp.com","/file/").concat(e.image)),(e.datepicker||e.date)&&(e.datepicker=new Date(e.datepicker).toLocaleDateString(),e.date=new Date(e.date).toLocaleDateString()),e})),e.loading=!1,t.next=17;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log(t.t0),n="",n=null===t.t0.response.data.message?t.t0:t.t0.response.data.message,e.Msg=n,e.msgModal=!0;case 17:case"end":return t.stop()}}),t,null,[[1,10]])})))()}}),l=r,d=a("2877"),o=Object(d["a"])(l,s,n,!1,null,null,null);t["default"]=o.exports},a480:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"manageReply"}},[e._v(" ManageReplyManageReply ")])},n=[],i={name:"ManageReply"},r=i,l=a("2877"),d=Object(l["a"])(r,s,n,!1,null,null,null);t["default"]=d.exports},d81d:function(e,t,a){"use strict";var s=a("23e7"),n=a("b727").map,i=a("1dde"),r=i("map");s({target:"Array",proto:!0,forced:!r},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},e513:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"manageEditApp"}},[a("md-card",[a("md-card-header",{staticClass:"md-secondary"},[a("h4",{staticClass:"title"},[e._v("Edit Profile")]),a("p",{staticClass:"category"},[e._v("Complete your profile")])]),a("md-card-content",[a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-small-size-100 md-size-33"},[a("md-field",[a("label",[e._v("User Name")]),a("md-input",{attrs:{type:"text"},model:{value:e.edit.username,callback:function(t){e.$set(e.edit,"username",t)},expression:"edit.username"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-33"},[a("md-field",[a("label",[e._v("Email Address")]),a("md-input",{attrs:{type:"email"},model:{value:e.edit.emailadress,callback:function(t){e.$set(e.edit,"emailadress",t)},expression:"edit.emailadress"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-50"},[a("md-field",[a("label",[e._v("First Name")]),a("md-input",{attrs:{type:"text"},model:{value:e.edit.firstname,callback:function(t){e.$set(e.edit,"firstname",t)},expression:"edit.firstname"}})],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-size-50"},[a("md-field",[a("label",[e._v("Last Name")]),a("md-input",{attrs:{type:"text"},model:{value:e.edit.lastname,callback:function(t){e.$set(e.edit,"lastname",t)},expression:"edit.lastname"}})],1)],1),a("div",{staticClass:"md-layout-item md-size-100"},[a("md-field",{attrs:{maxlength:"5"}},[a("label",[e._v("About Me")]),a("md-textarea",{model:{value:e.edit.aboutme,callback:function(t){e.$set(e.edit,"aboutme",t)},expression:"edit.aboutme"}})],1)],1),a("div",{staticClass:"md-layout-item md-size-100 text-right"},[a("md-button",{staticClass:"md-raised md-success"},[e._v("Update Profile")])],1)])])],1)],1)},n=[],i={name:"ManageEditApp",data:function(){return{edit:{username:null,disabled:null,emailadress:null,lastname:null,firstname:null,address:null,city:null,country:null,code:null,aboutme:"Lamborghini Mercy, Your chick she so thirsty, I'm in that two seat Lambo."}}}},r=i,l=a("2877"),d=Object(l["a"])(r,s,n,!1,null,null,null);t["default"]=d.exports},ed7c:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"manageMemberData"}},[a("md-table",{attrs:{"md-card":"","md-sort":"name","md-sort-order":"asc","md-fixed-header":""},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var s=t.item;return a("md-table-row",{},[a("md-table-cell",{staticClass:"avatar",attrs:{"md-label":"Avatar"}},[s.avatar?a("md-avatar",{},[a("img",{attrs:{src:s.avatar,alt:s.name,width:"90"}})]):e._e()],1),a("md-table-cell",{attrs:{"md-label":"Name"}},[e._v(e._s(s.name||s.account))]),a("md-table-cell",{attrs:{"md-label":"Role"}},[e._v(e._s(s.role))]),a("md-table-cell",{attrs:{"md-label":"Tokens"}},[e._v(e._s(s.tokens))]),a("md-table-cell",{attrs:{"md-label":"Editor"}},[e._v(e._s(s.editor))])],1)}}]),model:{value:e.memberData,callback:function(t){e.memberData=t},expression:"memberData"}},[a("md-table-toolbar",[a("div",{staticClass:"md-toolbar-section-start"},[a("h1",{staticClass:"md-title"},[e._v("使用者清單")])]),a("div",{staticClass:"md-toolbar-section-end"},[a("md-button",{staticClass:"md-primary md-raised",on:{click:function(t){e.addUserBtn=!0}}},[e._v(" 新增使用者 ")])],1)]),a("md-table-empty-state",{attrs:{"md-label":"No users","md-icon":"person_search"}})],1),a("md-dialog",{attrs:{"md-active":e.addUserBtn},on:{"update:mdActive":function(t){e.addUserBtn=t},"update:md-active":function(t){e.addUserBtn=t}}},[a("md-dialog-title",[a("div",{staticClass:"md-layout md-alignment-center-space-between"},[a("md-icon",{staticClass:"md-size-3x signIcon"},[e._v("person_pin")])],1)]),a("md-dialog-content",{staticClass:"md-scrollbar"},[a("form",{staticClass:"md-layout md-small-hide",attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.validateUser.apply(null,arguments)},reset:e.clearForm}},[a("md-card",{staticClass:"md-layout-item"},[a("md-card-content",[a("md-field",{class:e.getValidationClass("account")},[a("label",{attrs:{for:"account"}},[e._v("Account")]),a("md-input",{attrs:{name:"account",autocomplete:"account",placeholder:"Your Account...",disabled:e.sending},model:{value:e.signUp.account,callback:function(t){e.$set(e.signUp,"account",t)},expression:"signUp.account"}}),e.$v.signUp.account.required?e.$v.signUp.account.minlength?e._e():a("span",{staticClass:"md-error"},[e._v("帳號最少須 5 個字，最多 20 個字")]):a("span",{staticClass:"md-error"},[e._v("帳號是必填欄位")])],1),a("md-field",{class:e.getValidationClass("password")},[a("label",{attrs:{for:"password"}},[e._v("Password")]),a("md-input",{attrs:{type:"password",name:"password",autocomplete:"password",placeholder:"password...",disabled:e.sending},model:{value:e.signUp.password,callback:function(t){e.$set(e.signUp,"password",t)},expression:"signUp.password"}}),e.$v.signUp.password.required?e.$v.signUp.password.minlength?e._e():a("span",{staticClass:"md-error"},[e._v("密碼最少須 4 個字，最多 20 個字")]):a("span",{staticClass:"md-error"},[e._v("密碼是必填欄位")])],1)],1),e.sending?a("md-progress-bar",{attrs:{"md-mode":"indeterminate"}}):e._e(),a("md-card-actions",[a("md-button",{staticClass:"md-primary",on:{click:function(t){e.addUserBtn=!1}}},[e._v(" 關閉 ")]),a("md-button",{staticClass:"md-primary",attrs:{type:"reset"}},[e._v("重設")]),a("md-button",{staticClass:"md-primary",attrs:{type:"submit",disabled:e.sending}},[e._v("創建 ")])],1)],1),a("md-snackbar",{attrs:{"md-active":e.messageSussess},on:{"update:mdActive":function(t){e.messageSussess=t},"update:md-active":function(t){e.messageSussess=t}}},[e._v(" 新帳號 "+e._s(e.user)+" 創建成功！ ")])],1)])],1),a("md-dialog-alert",{attrs:{"md-active":e.messageShow,"md-title":"ERROR","md-content":e.message},on:{"update:mdActive":function(t){e.messageShow=t},"update:md-active":function(t){e.messageShow=t}}})],1)},n=[],i=a("1da1"),r=(a("d81d"),a("96cf"),a("1dce")),l=a("b5ae"),d={name:"ManageMemberData",mixins:[r["validationMixin"]],data:function(){return{selected:{},memberData:[],addUserBtn:!1,signUp:{account:"",password:"",avatar:""},sending:!1,messageSussess:!1,messageShow:!1,message:""}},validations:{signUp:{account:{required:l["required"],minLength:Object(l["minLength"])(5),maxLength:Object(l["maxLength"])(20)},password:{required:l["required"],minLength:Object(l["minLength"])(4),maxLength:Object(l["maxLength"])(20)}}},methods:{getValidationClass:function(e){var t=this.$v.signUp[e];if(t)return{"md-invalid":t.$invalid&&t.$dirty}},validateUser:function(){this.$v.$touch(),this.$v.$invalid||this.addUser()},addUser:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.signUp.avatar=e.avatarImg,t.next=4,e.axios.post("/users",e.signUp);case 4:e.sending=!0,window.setTimeout((function(){e.messageSussess=!0,e.sending=!1,e.clearForm(),e.$router.go()}),1500),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),window.setTimeout((function(){e.messageShow=!0,e.message=t.t0,e.sending=!0,e.clearForm()}),1500);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},clearForm:function(){this.$v.$reset(),this.sending=!1,this.signUp.account="",this.signUp.password=""}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/users",{headers:{authorization:"Bearer "+e.$store.state.jwt.token}});case 2:a=t.sent,s=a.data,e.memberData=s.result.map((function(e){return e.tokens&&(e.tokens=e.tokens.length),e.editor&&(e.editor=e.editor.length),e}));case 5:case"end":return t.stop()}}),t)})))()}},o=d,c=a("2877"),m=Object(c["a"])(o,s,n,!1,null,null,null);t["default"]=m.exports},f74b:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"manage"}},[a("md-tabs",{attrs:{"md-sync-route":""},on:{"md-changed":e.checkNewPosts},scopedSlots:e._u([{key:"md-tab",fn:function(t){var s=t.tab;return[e._v(" "+e._s(s.label)+" "),s.data.badge?a("i",{staticClass:"badge"},[e._v(e._s(s.data.badge))]):e._e()]}}])},[a("md-tab",{attrs:{id:"tab-Home","md-label":"Home",to:"/manage",exact:""}},[a("router-view")],1),a("md-tab",{attrs:{id:"tab-memberData","md-label":"memberData",to:"/manage/memberData"}},[a("router-view")],1),a("md-tab",{attrs:{id:"tab-article","md-label":"article",to:"/manage/article","md-template-data":{badge:e.articleTotal}}},[a("router-view")],1),a("md-tab",{attrs:{id:"tab-template","md-label":"template",to:"/manage/template"}},[a("router-view")],1),a("md-tab",{attrs:{id:"tab-reply","md-label":"reply",to:"/manage/reply","md-template-data":{badge:e.newPosts}},on:{click:e.clearNewPosts}},[a("router-view")],1),a("md-tab",{attrs:{id:"tab-special","md-label":"special",to:"/manage/special"}},[a("router-view")],1),a("md-tab",{attrs:{id:"tab-editApp","md-label":"editApp",to:"/manage/editApp"}},[a("router-view")],1)],1)],1)},n=[],i={name:"Manage",data:function(){return{articleTotal:0,newPosts:0,checkInterval:null}},methods:{clearCheckPosts:function(){window.clearInterval(this.checkInterval),this.checkInterval=null},clearNewPosts:function(){this.clearCheckPosts(),this.newPosts=0},checkNewPosts:function(e){var t=this;"tab-posts"===e||this.checkInterval||(this.checkInterval=window.setInterval((function(){99===t.newPosts?(t.newPosts="99+",t.clearCheckPosts()):t.newPosts++}),1e3))}},mounted:function(){this.checkNewPosts()}},r=i,l=a("2877"),d=Object(l["a"])(r,s,n,!1,null,null,null);t["default"]=d.exports},f761:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"manageHome"}},[a("md-avatar",{staticClass:"md-large md-elevation-5"},[a("img",{attrs:{src:e.avatarImg,alt:""}})]),a("h2",[e._v(e._s(e.userName))])],1)},n=[],i={name:"ManageHome",components:{},computed:{user:function(){return this.$store.state.user}}},r=i,l=a("2877"),d=Object(l["a"])(r,s,n,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=manage.ff20f0ed.js.map